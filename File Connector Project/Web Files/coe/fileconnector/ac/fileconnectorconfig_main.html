<!--
	© 2008 Cordys R&D B.V. All rights reserved.
	The computer program(s) is the proprietary information of Cordys R&D B.V. 
	and provided under the relevant License Agreement containing restrictions 
	on use and disclosure. Use is subject to the License Agreement.
-->
<html xmlns:eibus onselect="onAppSelect()">
    <head>
        <script src="/cordys/wcp/application.js"></script>
        <script src="common.js"></script>
        <title>FileConnector Configuration</title>
    </head>
    <script>
    	/**
    	 * Indicates whether the page is loaded completely.
    	 */
    	var pageInitialized = false; 
    	/**
    	 * Contains data passed from the parent page. This page regiters
    	 * callback methods for it.
    	 */
    	var parentPageData;
    	
    	var dataFields = [
			{ id: "txtReaderConfigFile", 	name: "readerconfigfile", 		def: "/Cordys/fileconnector/config/reader-config.xml" },
			{ id: "txtWriterConfigFile", 	name: "writerconfigfile", 		def:  "/Cordys/fileconnector/config/writer-config.xml" },
			{ id: "txtInputCharSet", 		name: "readercharset", 			def:  "ISO-8859-1" },
			{ id: "txtOutputCharSet", 		name: "writercharset", 			def:  "ISO-8859-1" },
			{ id: "txtIncludedDirectories", name: "included-directories", 	def:  "" },
			{ id: "chkReloadConfiguration", name: "reload-configuration",	def:  "false" },
			{ id: "chkUseSimpleXPath", 		name: "use-simple-xpath",		def:  "false" }
    	];
        
        /**
         * Called when this page is selected by application.select()
         */
        function onAppSelect()
        {
			if (application.event && application.event.data) {
        		parentPageData = application.event.data;
        		parentPageData.isPageLoaded = isPageLoaded;
        		parentPageData.createConnectorConfiguration = createConnectorConfiguration;
        		parentPageData.fillInPropertyScreen = fillInPropertyScreen;
			}
			
			pageInitialized = true;
        }
        
        /**
         * Returns true if the pages has been completely loaded.
         */
        function isPageLoaded()
        {
        	return pageInitialized;
        }

        /**
         * This method creates the needed configuration for the connector
         *
         * @param xmlConfig The configuration-XML.
         */
        function createConnectorConfiguration(xmlConfig)
        {
        	copyFieldsToXml(dataFields, xmlConfig, document);
            
            return true;
        }//createConnectorConfiguration
        
        /**
         * This method fills the inputfields based on the XML
         *
         * @param xmlConfig The configuration-XML.
         */
        function fillInPropertyScreen(xmlConfig)
        {   
            copyFieldsFromXml(dataFields, xmlConfig, document);
            
            return true;
        }
    </script>
    <body>
        <table width="100%" style="border: 1px solid black;" cellspacing="0" cellpadding="5">
            <tr class="medium">
                <td colspan="2" align="center">
                    <STRONG>FileConnector Details</STRONG>
                </td>
            </tr>
            <tr>
                <td width="50%" align="right"  valign="top">
                    Record Reader Configuration File XMLStore Key	
                </td>
                <td  align="left">
                    <input type="text" style="width:300px" id="txtReaderConfigFile" class="input" value="/Cordys/fileconnector/config/reader-config.xml" />
                </td>
            </tr>
            <tr>
                <td width="50%" align="right"  valign="top">
                    Record Writer Configuration File XMLStore Key	
                </td>
                <td  align="left">
                    <input type="text" style="width:300px" id="txtWriterConfigFile" class="input" value="/Cordys/fileconnector/config/writer-config.xml" />
                </td>
            </tr>
            <tr>
                <td width="50%" align="right"  valign="top">
                    Reload configuration	
                </td>
                <td  align="left">
                    <input type="checkbox" id="chkReloadConfiguration" /> 
                    <br/>
                    If enabled, the ReadFileRecords and WriteFileRecords configuration is 
                    loaded for each execution. Use only for development. 
                </td>
            </tr>
            <tr>
                <td width="50%" align="right"  valign="top">
                    Use simple XPath expressions.	
                </td>
                <td  align="left">
                    <input type="checkbox" id="chkUseSimpleXPath" /> 
                    <br/>
                    Use backwards compatible XPath expressions.
                </td>
            </tr>            
            <tr>
                <td width="50%" align="right"  valign="top">
                    Input Character Set (optional)
                </td>
                <td  align="left" valign="top">
                    <input type="text" style="width:300px" id="txtInputCharSet" class="input" value="ISO-8859-1" />
					<br/>
					Note that only single byte character sets are supported.
                </td>
            </tr>			
            <tr>
                <td width="50%" align="right"  valign="top">
                    Output Character Set (optional)
                </td>
                <td  align="left" valign="top">
                    <input type="text" style="width:300px" id="txtOutputCharSet" class="input" value="ISO-8859-1" />
                </td>
            </tr>	
            <tr>
                <td width="50%" align="right" valign="top">
                    Allowed File And Directory Names
                </td>
                <td  align="left">
                    <textarea style="width:500px;height:200px" id="txtIncludedDirectories"></textarea>
					<br/>
					Write each name in a separate line.
					<br/>
					<br/>
					Wildcards allowed are : 
					<ul>
						<li>* - Match portions of the string, e.g. c:\dir\*.txt</li>
						<li>** - Match any sub-directory, e.g. c:\dir\**\*.txt</li>
					</ul>
					If this is left empty, all files are allowed.
                </td>
            </tr>	
        </table>
    </body>
</html>
